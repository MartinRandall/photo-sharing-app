# PhotoShare - Photo Sharing Application

A modern photo sharing web application built with Next.js 15, AWS Amplify, and TypeScript. Users can upload photos, view their gallery, and engage with others through comments.

## Features

- ğŸ” **User Authentication** - Secure sign up/sign in with AWS Cognito
- ğŸ“¸ **Photo Upload** - Upload images to AWS S3 with title and description
- ğŸ–¼ï¸ **Photo Gallery** - View all your uploaded photos in a responsive grid
- ğŸ’¬ **Comments** - Add and delete comments on photos
- ğŸ—‘ï¸ **Photo Management** - Delete your own photos and comments
- ğŸ“± **Responsive Design** - Works seamlessly on desktop and mobile
- ğŸ¨ **Modern UI** - Built with Tailwind CSS and shadcn/ui components

## Tech Stack

- **Framework**: Next.js 15 (App Router)
- **Language**: TypeScript
- **Styling**: Tailwind CSS
- **UI Components**: shadcn/ui
- **Backend**: AWS Amplify Gen 2
  - Authentication: Amazon Cognito
  - Storage: Amazon S3
  - Database: DynamoDB with AppSync GraphQL API
- **Hosting**: AWS Amplify Hosting

## Prerequisites

- Node.js 18+ (v24.4.1 recommended)
- npm or yarn
- AWS Account
- AWS Amplify CLI installed globally

## Getting Started

### 1. Clone and Install Dependencies

```bash
cd photo-sharing-app
npm install
```

### 2. Configure AWS Amplify

First, ensure you have AWS credentials configured:

```bash
aws configure
```

### 3. Deploy the Amplify Backend

Deploy the authentication, database, and storage resources to AWS:

```bash
npx ampx sandbox
```

This command will:
- Create a Cognito user pool for authentication
- Set up DynamoDB tables with AppSync GraphQL API
- Create S3 buckets for photo storage
- Generate the `amplify_outputs.json` configuration file

Wait for the sandbox to complete deployment. Keep the terminal open as the sandbox runs in watch mode.

### 4. Run the Development Server

In a new terminal window:

```bash
npm run dev
```

Open [http://localhost:3000](http://localhost:3000) in your browser.

## Usage

### Sign Up

1. Click "Sign Up" in the navigation
2. Enter your email and password
3. Check your email for the confirmation code
4. Enter the code to verify your account

### Upload Photos

1. Sign in to your account
2. Navigate to "Gallery"
3. Fill in the upload form with:
   - Select an image file
   - Add a title
   - Optionally add a description
4. Click "Upload Photo"

### View and Comment

1. Click on any photo to view details
2. Add comments in the comments section
3. Delete your own comments if needed

### Delete Photos

- From the gallery: Click the "Delete" button on any photo card
- From photo details: Click the "Delete" button at the top right

## Project Structure

```
photo-sharing-app/
â”œâ”€â”€ app/                      # Next.js app directory
â”‚   â”œâ”€â”€ auth/                # Authentication pages
â”‚   â”‚   â”œâ”€â”€ signin/
â”‚   â”‚   â””â”€â”€ signup/
â”‚   â”œâ”€â”€ gallery/             # Photo gallery page
â”‚   â”œâ”€â”€ photos/[id]/         # Individual photo detail page
â”‚   â”œâ”€â”€ layout.tsx           # Root layout with Amplify config
â”‚   â”œâ”€â”€ page.tsx             # Home/landing page
â”‚   â””â”€â”€ globals.css          # Global styles
â”œâ”€â”€ components/              # React components
â”‚   â”œâ”€â”€ auth/               # Auth-related components
â”‚   â”œâ”€â”€ photos/             # Photo-related components
â”‚   â””â”€â”€ ui/                 # shadcn/ui components
â”œâ”€â”€ amplify/                # Amplify backend configuration
â”‚   â”œâ”€â”€ auth/              # Auth resource definition
â”‚   â”œâ”€â”€ data/              # Data schema (Photos, Comments)
â”‚   â”œâ”€â”€ storage/           # S3 storage configuration
â”‚   â””â”€â”€ backend.ts         # Main backend config
â””â”€â”€ lib/                   # Utility functions
```

## Deployment to Production

### Deploy Backend

```bash
npx ampx pipeline-deploy --branch main --app-id <your-app-id>
```

### Deploy Frontend

1. Push your code to GitHub
2. In the AWS Amplify Console:
   - Connect your repository
   - Configure build settings (auto-detected)
   - Deploy

Or use the Amplify CLI:

```bash
amplify publish
```

## Environment Variables

The app uses `amplify_outputs.json` which is automatically generated by Amplify. This file contains:
- Auth configuration
- API endpoints
- Storage bucket names

âš ï¸ Never commit `amplify_outputs.json` to version control in production.

## Data Models

### Photo

- `id`: Auto-generated UUID
- `userId`: Owner's user ID
- `title`: Photo title
- `description`: Optional description
- `s3Key`: S3 object key
- `uploadedAt`: Upload timestamp

### Comment

- `id`: Auto-generated UUID
- `photoId`: Reference to photo
- `userId`: Commenter's user ID
- `username`: Commenter's email
- `content`: Comment text
- `createdAt`: Creation timestamp

## Security

- User authentication required for all operations
- Photos are scoped to user identity in S3
- Owner-based authorization for photo deletion
- Authenticated users can read all photos and add comments
- Users can only delete their own comments

## Troubleshooting

### Amplify Backend Issues

```bash
# Delete and recreate sandbox
npx ampx sandbox delete
npx ampx sandbox
```

### Authentication Errors

- Check that `amplify_outputs.json` exists
- Verify AWS credentials are configured
- Ensure Cognito user pool is created

### Image Upload Failures

- Check S3 bucket permissions
- Verify file size is under limits
- Ensure file is a valid image format

## Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Submit a pull request

## License

MIT

## Support

For issues and questions, please open an issue on GitHub.
